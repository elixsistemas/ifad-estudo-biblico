/* =========================
   Design Tokens
========================= */
:root{
  --bg:#0a0f1a; --fg:#eaf0ff; --muted:#a8b3d1; --brand:#f2b705; --brand-ink:#14120a; --line:#132036;
  --card:#101a2b; --card2:#0f1726;

  /* Auxiliares de cards (dark por padrão) */
  --card-border: color-mix(in srgb, var(--line) 80%, transparent);
  --card-hover: color-mix(in srgb, var(--card) 85%, var(--card2) 15%);
  --shadow-sm: 0 6px 18px rgba(0,0,0,.18);
  --shadow-md: 0 10px 28px rgba(0,0,0,.28);
}
html[data-theme="light"]{
  --bg:#ffffff; --fg:#111827; --muted:#4b5563; --brand:#c28a00; --brand-ink:#111; --line:#e5e7eb;
  --card:#f8fafc; --card2:#f3f4f6;

  --card-border:#e5e7eb;
  --card-hover:#f1f5f9;
  --shadow-sm: 0 6px 18px rgba(0,0,0,.06);
  --shadow-md: 0 10px 28px rgba(0,0,0,.10);
}

/* =========================
   Base / Reset
========================= */
*{ box-sizing:border-box; }
html,body{
  margin:0; background:var(--bg); color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}
a{ color:var(--fg); text-decoration:none; }
a:hover{ text-decoration:underline; }
:focus-visible{ outline:2px solid var(--brand); outline-offset:2px; border-radius:8px; }

/* Utils */
.hidden{ display:none; }
.note{ color:var(--muted); font-size:.9rem; }

/* =========================
   Layout
========================= */
.container{ max-width:1100px; margin:0 auto; padding:28px 20px; }
.header{
  position:sticky; top:0; z-index:30; backdrop-filter:blur(6px);
  border-bottom:1px solid var(--line); padding:12px 0; margin-bottom:16px;
}
.header .brand{ display:inline-flex; align-items:center; gap:10px; }
.header .brand strong{
  font-size:clamp(1.05rem, 1.2rem + 0.4vw, 1.6rem);
  font-weight:800; letter-spacing:.2px;
}
.header .logo{
  display:block; width:auto; height:68px; max-height:68px; object-fit:contain;
}
.header .right{ margin-left:auto; display:flex; gap:12px; align-items:center; }
.theme-switch{
  background:transparent; border:1px solid var(--line); color:var(--fg);
  padding:6px 10px; border-radius:8px; cursor:pointer;
}

/* =========================
   Generic Components
========================= */
.hero{ padding:32px 0; border-bottom:1px solid var(--line); }
.cta{ display:flex; gap:12px; margin-top:14px; flex-wrap:wrap; }

.btn{
  background:var(--brand); color:var(--brand-ink);
  border:0; padding:10px 14px; border-radius:10px; font-weight:700; cursor:pointer;
  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.btn:hover{ filter:brightness(1.05); transform:translateY(-1px); }
.btn.outline{ background:transparent; border:1px solid var(--brand); color:var(--fg); }
.btn.slim{ padding:8px 12px; border-radius:10px; }
.btn.big{
  display:block; width:100%; min-height:56px; font-size:1.05rem;
  border-radius:999px; font-weight:800;
}
.btn:focus-visible{
  box-shadow:
    0 0 0 2px var(--bg),
    0 0 0 4px color-mix(in srgb, var(--brand) 70%, white 20%);
}

/* Tabs */
nav.tabs{ display:flex; gap:12px; margin:12px 0 16px; padding-bottom:8px; border-bottom:1px solid var(--line); }
nav.tabs a{ padding:8px 12px; border-radius:8px; background:var(--card2); border:1px solid var(--line); }
nav.tabs a:hover{ background:var(--card); }

/* Lists */
ul.days{ list-style:none; padding:0; }
ul.days li{ padding:12px 10px; border-bottom:1px solid var(--line); border-radius:10px; }
ul.days li:hover{ background:var(--card); }

/* Forms */
.form{ display:grid; gap:12px; margin:12px 0 20px; }
.field{ display:grid; gap:6px; }
.form .field{ margin-bottom:.875rem; }
.form .field > label{ display:block; font-weight:600; margin-bottom:.25rem; }
label{ font-weight:600; color:var(--muted); }
input,select,textarea{
  background:var(--card2); color:var(--fg); border:1px solid var(--line);
  border-radius:10px; padding:10px 12px; min-height:44px; width:100%;
}

/* Alert */
.alert{
  background:#ffe9e9; color:#7a1f1f; padding:.75rem 1rem; border-radius:.5rem;
  border:1px solid #90344e;
}

/* Progress */
.progress{
  position:relative; background:var(--card2); border:1px solid var(--line);
  border-radius:999px; height:20px; margin:14px 0 22px;
}
.progress .bar{ position:absolute; left:0; top:0; bottom:0; background:var(--brand); border-radius:999px; }
.progress .label{
  position:absolute; width:100%; text-align:center; font-size:.85rem; top:0; line-height:20px; font-weight:800;
}
html[data-theme="dark"] .progress .label{ color:#0a0f1a; }
html[data-theme="light"] .progress .label{ color:#111; }

/* Pills */
.pill{
  padding:3px 8px; border-radius:999px; border:1px solid var(--line);
  font-size:.8rem; color:var(--muted);
}
.pill.ok{ background:#163a22; border-color:#1e7a3f; color:#c3f2cd; }

/* =========================
   Cards — versão unificada
========================= */
.cards{
  display:grid; gap:16px;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
}
.card{
  padding:14px;                 /* respiro padrão */
  display:grid;
  gap:10px;  
  background:var(--card);
  border:1px solid var(--card-border);
  border-radius:14px;
  overflow:hidden;
  transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
  box-shadow:none;
}

.card .btn{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  width: fit-content;  
  min-width: 0;
  padding: 8px 12px;          
  border-radius: 10px;
  font-size: .95rem;
  font-weight: 800;
  align-self: start;      
}

.btn-sm{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;

  width: fit-content;
  padding: 8px 12px;
  border-radius: 10px;
  font-size: .95rem;
  font-weight: 800;
}

@media (max-width: 768px){
  .btn{ min-height: 44px; } 
  .btn.block{ width: 100%; }   
  .btn:not(.block){ width: auto; }
}

.card:hover{
  transform:translateY(-2px);
  background:var(--card-hover);
  border-color: color-mix(in srgb, var(--brand) 22%, var(--card-border));
  box-shadow: var(--shadow-sm);
}
.card:focus-within{
  box-shadow:
    0 0 0 2px var(--bg),
    0 0 0 4px color-mix(in srgb, var(--brand) 65%, white 20%);
}
.card-img{ display:block; width:100%; height:auto; }
.card-body{ padding:12px 14px; }
.card-title{ font-size:1rem; line-height:1.25; margin:2px 0 6px; color:var(--fg); font-weight:700; }
.card-desc,.muted{ color:var(--muted); }
.card-link{ color:inherit; text-decoration:none; display:block; height:100%; }
.card.is-emphasis{
  background:var(--card2);
  box-shadow: var(--shadow-md);
  border-color: color-mix(in srgb, var(--brand) 18%, var(--card-border));
}

/* =========================
   Reader (página /app/reader)
========================= */
.reader .controls{
  display:grid; grid-template-columns:repeat(4,1fr); gap:12px; align-items:end;
}
.reader .controls .field > *{ width:100%; }
.reader .action{ margin-top:8px; }
.reader .panel{
  background:var(--card); border:1px solid var(--line); border-radius:12px; padding:12px; margin-top:12px;
}
.reader .tabs-wrap{ position:sticky; top:64px; z-index:20; background:var(--bg); padding-top:4px; }
.reader nav.tabs{ overflow-x:auto; -webkit-overflow-scrolling:touch; gap:8px; scrollbar-width:none; }
.reader nav.tabs::-webkit-scrollbar{ display:none; }

/* =========================
   Plano Anual – Lista (semanas / cards)
========================= */
.plan-hero .muted{ color:var(--muted); margin-top:4px; }
.plan-tabs{ overflow-x:auto; gap:8px; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
.plan-tabs::-webkit-scrollbar{ display:none; }

.weeks{ display:grid; gap:16px; }
.week{ background:var(--card); border:1px solid var(--line); border-radius:16px; }
.week__title{
  font-weight:800; font-size:.95rem; letter-spacing:.3px;
  border-bottom:1px solid var(--line); padding:10px 14px; color:var(--muted);
}
.week__list{ list-style:none; margin:0; padding:8px; display:grid; gap:8px; }

.daycard{
  display:flex; align-items:center; justify-content:space-between;
  gap:12px; padding:12px; border:1px solid var(--line); border-radius:12px;
  background:linear-gradient(180deg,var(--card2),var(--card)); position:relative;
}
.daycard::before{
  content:""; position:absolute; left:0; top:0; bottom:0; width:4px;
  background:#6b7280; border-top-left-radius:12px; border-bottom-left-radius:12px;
}
.daycard.is-done::before{ background:#1e7a3f; }
.daycard__left{ display:grid; gap:4px; min-width:0; }
.daycard__num{ font-weight:800; letter-spacing:.3px; }
.daycard__refs{ color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.daycard__right{ display:flex; align-items:center; gap:8px; }
.chip{ padding:4px 8px; border-radius:999px; border:1px solid var(--line); color:var(--muted); font-size:.8rem; }
.chip.ok{ background:#163a22; border-color:#1e7a3f; color:#c3f2cd; }

/* =========================
   Plano Anual – Dia (foco)
========================= */
.dayfocus .day-hero{
  display:grid; gap:10px; background:var(--card2);
  border:1px solid var(--line); border-radius:14px; padding:14px;
}
.day-hero__top{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.day-hero h1{ font-size:clamp(1.25rem, 1.1rem + 1.5vw, 2rem); line-height:1.2; margin:6px 0 2px; }

/* chips dos dias */
.chips-wrap{ margin-top:2px; }
.chips-scroll{
  display:flex; gap:10px; overflow-x:auto; -webkit-overflow-scrolling:touch;
  padding:2px 2px 6px; scrollbar-width:none;
}
.chips-scroll::-webkit-scrollbar{ display:none; }
.chip-day{
  position:relative; display:grid; place-items:center; text-align:center;
  min-width:64px; padding:8px 10px; border:1px solid var(--line);
  border-radius:12px; background:var(--card); color:var(--fg);
}
.chip-day__num{ font-weight:800; font-size:1.05rem; line-height:1; }
.chip-day__sub{ color:var(--muted); font-size:.72rem; margin-top:2px; }
.chip-day.is-current{
  background:var(--card2);
  box-shadow:0 0 0 2px var(--brand) inset;
  border-color:color-mix(in oklab, var(--brand) 45%, var(--line));
}
.chip-day .check{
  position:absolute; right:6px; top:6px;
  background:#163a22; color:#c3f2cd; border:1px solid #1e7a3f;
  border-radius:999px; padding:1px 6px; font-size:.7rem; font-weight:800;
}

/* lista de leituras do dia */
.readings{ list-style:none; padding:0; display:grid; gap:10px; }
.reading-row{
  position:relative; display:flex; align-items:center; gap:12px;
  background:var(--card2); border:1px solid var(--line);
  border-radius:12px; padding:14px 14px;
}
.reading-row .row-link{ position:absolute; inset:0; border-radius:inherit; }
.reading-row .label{ position:relative; z-index:1; font-weight:700; letter-spacing:.2px; }
.reading-row .chev{ position:relative; z-index:1; margin-left:auto; opacity:.55; font-weight:900; }
.reading-row .dot{
  position:relative; z-index:1; width:22px; height:22px; border-radius:50%;
  border:2px solid var(--line); background:transparent; cursor:pointer;
  display:inline-flex; align-items:center; justify-content:center;
}
.reading-row .dot.on{ background:#163a22; border-color:#1e7a3f; }
.reading-row .dot.on::after{ content:"✓"; font-weight:800; color:#c3f2cd; font-size:13px; }

/* navegação e CTA */
.day-actions{ margin:16px 0 88px; }
.day-actions .side-nav{
  display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-bottom:10px;
}
.day-actions .side-nav .btn{ min-height:44px; border-radius:12px; font-weight:700; }

.sticky-cta{
  position:fixed; left:0; right:0; bottom:0; z-index:40;
  padding:12px 14px calc(12px + env(safe-area-inset-bottom));
  background:linear-gradient(180deg, transparent 0%, var(--bg) 30%, var(--bg) 100%);
  box-shadow:0 -6px 24px rgba(0,0,0,.18);
}

/* =========================
   Modo Leitura Imersivo
========================= */
.focus-top{
  position:sticky; top:0; z-index:25;
  padding:10px 0; background:var(--bg); border-bottom:1px solid var(--line);
  display:flex; align-items:center; gap:12px;
}
.top-btn{
  display:inline-flex; align-items:center; justify-content:center;
  height:36px; min-width:36px; padding:0 10px;
  border:1px solid var(--line); border-radius:10px;
  background:transparent; color:var(--fg); cursor:pointer;
}
.chips{ display:flex; gap:8px; flex:1; }
.top-actions{ display:flex; gap:8px; }

.reading{ line-height:1.9; word-break:break-word; }
.reading .texto{ list-style:none; padding:0; margin:0; }
.reading .texto li{ padding:8px 0; }
.reading .texto .n{ color:var(--muted); margin-right:8px; font-weight:700; font-variant-numeric:tabular-nums; }

.focus-bottom{
  position:sticky; bottom:0; z-index:25;
  background:linear-gradient(180deg, transparent, var(--bg) 40%);
  padding:10px 0 14px; border-top:1px solid var(--line);
}
.progress-mini{ text-align:center; color:var(--muted); margin:0 0 8px; }

/* =========================
   Devocional – Hero/Overlay
========================= */
.hero-figure{
  position:relative;
  margin:12px 0 16px;
  border-radius:12px;
  overflow:hidden;
  background:#0b1220; /* fallback se não houver imagem */
}
.hero-img{ display:block; width:100%; height:auto; }

/* Rodapé em overlay */
.hero-caption{
  position:absolute; left:0; right:0; bottom:0;
  padding:18px 20px;
  background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.6) 85%);
  color:#fff;
}

/* Centro absoluto com scrim (variante .hero--center) */
.hero--center .hero-caption{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  padding:24px;
  background:
    linear-gradient(180deg, rgba(0,0,0,.25), rgba(0,0,0,.25)),
    radial-gradient(100% 60% at 50% 60%, rgba(0,0,0,.25) 0%, rgba(0,0,0,0) 60%);
  color:#fff;
}
.hero-box{
  max-width:min(900px, 92vw);
  padding:clamp(12px, 1.5vw, 20px) clamp(14px, 2vw, 28px);
  background:rgba(0,0,0,.35);
  border-radius:12px;
  backdrop-filter:blur(2px);
}

/* Texto do overlay (mostra só o 1º parágrafo) */
.hero-excerpt{
  font-weight:700;
  text-align:center;
  line-height:1.25;
  text-shadow:0 1px 2px rgba(0,0,0,.6);
  font-size:clamp(18px, 1.6vw + 10px, 28px);
  display:-webkit-box; -webkit-line-clamp:4; -webkit-box-orient:vertical;
  overflow:hidden; margin:0;
}
.hero-excerpt p{ margin:0; }
.hero-excerpt > *:not(:first-child){ display:none !important; }
.devo-body > p:first-of-type{ display:none; } /* evita repetição */

/* Tipografia do corpo */
.prose{
  --w:70ch;
  max-width:var(--w);
  font-size:1.05rem;
  line-height:1.7;
}
.prose p + p{ margin-top:.75em; }
.prose blockquote{
  margin:1rem 0; padding:.75rem 1rem;
  border-left:3px solid #d4b04a33;
  background:#fff9e61a; border-radius:8px;
}

/* =========================
   Navigation (mobile menu)
========================= */
.nav-toggle{ display:none; }
@media (max-width:768px){
  .nav-toggle{
    display:inline-flex; margin-left:auto; align-items:center; gap:8px;
    background:transparent; border:1px solid var(--line); color:var(--fg);
    padding:8px 12px; border-radius:10px; cursor:pointer;
  }
  .header .right{
    position:fixed; left:0; right:0; top:64px; background:var(--bg);
    border-bottom:1px solid var(--line); transform:translateY(-120%);
    transition:transform .25s ease; padding:12px 16px 16px; display:grid; gap:10px; z-index:25;
  }
  .header .right.is-open{ transform:translateY(0); }
  .theme-switch{ width:100%; text-align:center; }
}

/* =========================
   Responsive
========================= */
@media (max-width:1024px){
  .reader .controls{ grid-template-columns:1fr 1fr; }
}
@media (max-width:768px){
  .container{ padding:18px 14px; }
  .header{ padding:8px 0; }
  .header .logo{ height:40px; }
  .header .brand strong{ font-size:clamp(1rem, 2.6vw, 1.25rem); letter-spacing:.1px; }

  .btn{ min-height:44px; width:100%; }
  input,select,textarea{ font-size:16px; }
  .form{ gap:10px; }
  .card{ margin:10px 0; }

  ul.days li{ padding:12px; border-radius:10px; }
  .results{ gap:10px; }

  .reader .controls{ grid-template-columns:1fr; }
  .reader h1{ margin:8px 0 6px; }

  .chip-day{ min-width:60px; }
  .reading-item{ padding:12px; border-radius:12px; }
}
@media (max-width:480px){
  canvas{ width:100% !important; height:auto !important; }
  .note{ font-size:.95rem; }
  .progress{ height:18px; }
  .progress .label{ font-size:.8rem; line-height:18px; }
  .hero-box{ background:rgba(0,0,0,.45); }
  .hero-excerpt{ -webkit-line-clamp:5; }
}

/* Safe area footer padding (iOS) */
@supports (padding:max(0px)){
  .site-footer{ padding-bottom:max(16px, env(safe-area-inset-bottom)); }
}

/* =========================
   Ajustes de grid inline dos forms (Gatsby MDX)
========================= */
@media (max-width: 1024px){
  .form > div[style*="grid-template-columns"]{
    grid-template-columns: 1fr 1fr !important;
    gap: 12px !important;
  }
}
@media (max-width: 768px){
  .form > div[style*="grid-template-columns"]{
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }
  .form select, .form input, .form textarea{
    font-size:16px; min-height:44px;
  }
  .form .btn{ width:100%; min-height:44px; }
}

/* =========================
   Checkbox LGPD / consent
========================= */
.checkbox-row{
  display:flex; align-items:center; gap:10px; margin:8px 0 16px;
}
input[type="checkbox"]{
  width:22px; height:22px;
  accent-color:var(--brand);
  border:1.5px solid var(--line);
  border-radius:6px; vertical-align:middle;
}
input[type="checkbox"]:focus-visible{
  outline:2px solid var(--brand); outline-offset:2px; border-radius:6px;
}
@supports (-webkit-touch-callout: none){
  input[type="checkbox"]{ transform: translateY(1px); }
}
.checkbox-row label{ user-select:none; }
